<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register Asset</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f8f9fa;
            padding-top: 50px;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .card-header {
            background: #007bff;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }
        .btn-primary {
            width: 100%;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card">
                <div class="card-header">
                    Register New Asset
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label for="owner_name" class="form-label">Owner Name</label>
                            <input type="text" class="form-control" id="owner_name" name="owner_name" placeholder="Enter owner's full name" required>
                        </div>

                        <div class="mb-3">
                            <label for="owner_contact" class="form-label">Owner Contact</label>
                            <input type="text" class="form-control" id="owner_contact" name="owner_contact" placeholder="Enter phone or email" required>
                        </div>

                        <div class="mb-3">
                            <label for="category" class="form-label">Category</label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="" disabled selected>Select category</option>
                                <option value="physical">Physical</option>
                                <option value="digital">Digital</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="asset_type" class="form-label">Asset Type</label>
                            <input type="text" class="form-control" id="asset_type" name="asset_type" placeholder="e.g., Car, NFT" required>
                        </div>

                        <div class="mb-3">
                            <label for="name" class="form-label">Asset Name</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Enter asset name" required>
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="3" placeholder="Add a description"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="price_per_day" class="form-label">Price per Day</label>
                            <input type="number" class="form-control" id="price_per_day" name="price_per_day" step="0.01" placeholder="Enter price per day" required>
                        </div>

                        <div class="mb-3">
                            <label for="owner_wallet" class="form-label">Wallet Address</label>
                            <input type="text" class="form-control" id="owner_wallet" name="owner_wallet" readonly placeholder="Connect MetaMask wallet">
                            <button type="button" class="btn btn-warning mt-2" onclick="connectWallet()">Connect MetaMask</button>
                        </div>

                        <div class="mb-3">
                            <label for="image" class="form-label">Asset Image</label>
                            <input type="file" class="form-control" id="image" name="image">
                        </div>

                        <button type="submit" class="btn btn-primary">Register Asset</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MetaMask Script -->
<script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
<script>
let web3;
async function connectWallet() {
    if (window.ethereum) {
        web3 = new Web3(window.ethereum);
        try {
            await window.ethereum.request({ method: 'eth_requestAccounts' });
            const accounts = await web3.eth.getAccounts();
            document.getElementById('owner_wallet').value = accounts[0];
            alert("Wallet Connected: " + accounts[0]);
        } catch (error) {
            alert("Connection failed: " + error.message);
        }
    } else {
        alert("Please install MetaMask!");
    }
}
</script>

</body>
</html>
